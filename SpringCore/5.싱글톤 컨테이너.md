## 싱글톤 컨테이너

### 웹어플리케이션과 싱글톤

- 현재 코드는 Config 파일에 객체를 생성후 반환한다.
- 웹 어플리케이션은 다수의 요청을 받는다.
- ` 문제점 : 계속 객체를 생성하게 된다. ` 

### 싱글톤 패턴
- `해결방안 : 하나의 객체만 생성하는 싱글톤 패턴을 적용한다`
- static 영역에 instance 생성
- 객체 접근은 getInstance()를 통해서만
- `생성자는 private을 통해서 다른 곳에서 생성을 못하게 구현한다.`

- 문제점
    - 코드가 많이 추가된다
    - 구체 클래스에 의존하기 때문에 DIP위반한다
    - 클라이언트가 구체 클래스에 의존하기 때문에 OCP 위반할 가능성이 높다.
### 싱글톤 컨테이너
- `스프링 컨테이너에서 빈객체를 싱글톤으로 관리한다.`
- 위의 문제점을 해결하나?? ㅇㅇ 해결 가능함.
    - 지저분한 코드 해결 가능
    - DIP 해결 가능 인터페이스?? 용어를 모르겠네
    - OCP 해결 가능 인터페이스 ?? 구체 클래스 반대되는 용어가 머죠?? 김지원님...

### 싱글톤 방식의 주의점
- stateful 서비스에서는 사용하기 어렵다. (값을 공유하기 때문에)
- `스프링 빈은 항상 stateless 로 설계해야한다.` 

### @Configuration과 싱글톤
- bean 객체를 여러번 호출하는 것은 각각의 구체들을 여러번 생성하는 것 처럼 보인다
- 하지만, 각 빈 객체들은 한번만 생성된다.
- 어떻게든 싱글톤을 보장을 하려고 노력한다.

### @Configuration
- 사실 AppConfig.class 가 아니라
    싱글톤을 유지하게 상속을 받은 새로운 객체를 반환한다.
- 이게 싱글톤을 유지시킨다.
- @Configuration을 사용하지 않으면 싱글톤이 깨진다.
